import{a as X}from"./chunk-E4PSESS4.js";import{a as U}from"./chunk-WIAQBLJL.js";import{a as G}from"./chunk-AG3KCVKV.js";import{a as I,c as W}from"./chunk-GNZCGCMG.js";import{a as F,d as T,e as V,f as N,g as L,h as q,k as j,l as B,m as D,n as R,q as A}from"./chunk-YFY2E5R4.js";import{a as z}from"./chunk-PDLKG3CJ.js";import"./chunk-AK6URBU6.js";import{l as O,q as k}from"./chunk-BZWQZBMF.js";import{Cb as S,Hb as C,Jb as f,Nb as E,Tb as l,Ub as M,Wb as p,Xb as g,Ya as d,Yb as _,Za as u,_b as w,ka as v,ob as b,qb as s,rb as y,ua as h,va as P,wb as r,xb as n,yb as x}from"./chunk-P5NMP2U3.js";function J(a,m){if(a&1&&(r(0,"option",16),l(1),n()),a&2){let e=m.$implicit;s("value",e.idCategoria),d(),M(e.nombreCategoria)}}function K(a,m){if(a&1&&(r(0,"option",16),l(1),n()),a&2){let e=m.$implicit;s("value",e.idEstadoProducto),d(),M(e.nombreEstado)}}function Q(a,m){if(a&1){let e=S();r(0,"label")(1,"input",17),C("change",function(t){let c=h(e).$implicit,i=f();return P(i.toggleColor(c.idColor,t))}),n(),x(2,"span",18),n()}if(a&2){let e=m.$implicit,o=f();d(),s("value",e.idColor)("checked",o.estaSeleccionadoColor(e.idColor)),d(),y("background-color",e.codigoColor)}}function Y(a,m){if(a&1){let e=S();r(0,"div",19)(1,"input",20),_("ngModelChange",function(t){let c=h(e).index,i=f();return g(i.imagenes[c],t)||(i.imagenes[c]=t),P(t)}),n(),r(2,"button",21),C("click",function(){let t=h(e).index,c=f();return P(c.eliminarImagen(t))}),l(3,"X"),n()()}if(a&2){let e=m.index,o=f();d(),E("name","imagen",e,""),p("ngModel",o.imagenes[e])}}var de=(()=>{class a{constructor(e,o,t,c,i,H){this.productoService=e,this.categoriaService=o,this.colorService=t,this.estadoProductoService=c,this.route=i,this.router=H,this.producto={nombre:"",descripcion:"",dimensiones:"",idCategoria:null,idEstadoProducto:null,imagenes:[],colores:[]},this.esEdicion=!1,this.categorias=[],this.colores=[],this.estadosProducto=[],this.imagenes=[]}ngOnInit(){this.cargarListas();let e=this.route.snapshot.paramMap.get("id");e&&(this.esEdicion=!0,this.productoService.obtenerPorId(+e).subscribe(o=>{this.producto=o,this.imagenes=o.imagenes.map(t=>t.urlImagen)}))}cargarListas(){this.categoriaService.listar().subscribe(e=>this.categorias=e),this.colorService.listarColores().subscribe(e=>this.colores=e),this.estadoProductoService.listarEstados().subscribe(e=>this.estadosProducto=e)}toggleColor(e,o){o.target.checked?this.producto.colores.push({idColor:e}):this.producto.colores=this.producto.colores.filter(t=>t.idColor!==e)}agregarImagen(){this.imagenes.push("")}eliminarImagen(e){this.imagenes.splice(e,1)}guardarProducto(){this.producto.imagenes=this.imagenes.filter(o=>o.trim()!=="").map(o=>({urlImagen:o})),(this.esEdicion?this.productoService.actualizarProducto(this.producto):this.productoService.registrarProducto(this.producto)).subscribe({next:()=>{alert(this.esEdicion?"Producto actualizado correctamente":"Producto registrado correctamente"),this.router.navigate(["/admin/productos"])},error:o=>{alert("Error: "+o.message)}})}estaSeleccionadoColor(e){return this.producto.colores?.some(o=>o.idColor===e)}cancelar(){this.router.navigate(["/admin/productos"])}static{this.\u0275fac=function(o){return new(o||a)(u(G),u(z),u(U),u(X),u(I),u(W))}}static{this.\u0275cmp=v({type:a,selectors:[["app-crear-producto"]],standalone:!0,features:[w],decls:42,vars:10,consts:[[1,"crear-producto-container"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","nombre","required","",3,"ngModelChange","ngModel"],["name","descripcion","required","",3,"ngModelChange","ngModel"],["type","text","name","dimensiones","required","",3,"ngModelChange","ngModel"],["name","categoria","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["name","estado","required","",3,"ngModelChange","ngModel"],[1,"color-opciones"],[4,"ngFor","ngForOf"],["class","imagen-url",4,"ngFor","ngForOf"],["type","button",1,"btn-secundario",3,"click"],[1,"form-buttons"],["type","submit",1,"btn-primario"],["type","button",1,"btn-cancelar",3,"click"],[3,"value"],["type","checkbox",3,"change","value","checked"],[1,"color-circulo"],[1,"imagen-url"],["type","text","placeholder","https://...",3,"ngModelChange","ngModel","name"],["type","button",3,"click"]],template:function(o,t){o&1&&(r(0,"div",0)(1,"h2"),l(2),n(),r(3,"form",1),C("ngSubmit",function(){return t.guardarProducto()}),r(4,"div",2)(5,"label"),l(6,"Nombre"),n(),r(7,"input",3),_("ngModelChange",function(i){return g(t.producto.nombre,i)||(t.producto.nombre=i),i}),n()(),r(8,"div",2)(9,"label"),l(10,"Descripci\xF3n"),n(),r(11,"textarea",4),_("ngModelChange",function(i){return g(t.producto.descripcion,i)||(t.producto.descripcion=i),i}),n()(),r(12,"div",2)(13,"label"),l(14,"Dimensiones"),n(),r(15,"input",5),_("ngModelChange",function(i){return g(t.producto.dimensiones,i)||(t.producto.dimensiones=i),i}),n()(),r(16,"div",2)(17,"label"),l(18,"Categor\xEDa"),n(),r(19,"select",6),_("ngModelChange",function(i){return g(t.producto.idCategoria,i)||(t.producto.idCategoria=i),i}),b(20,J,2,2,"option",7),n()(),r(21,"div",2)(22,"label"),l(23,"Estado del producto"),n(),r(24,"select",8),_("ngModelChange",function(i){return g(t.producto.idEstadoProducto,i)||(t.producto.idEstadoProducto=i),i}),b(25,K,2,2,"option",7),n()(),r(26,"div",2)(27,"label"),l(28,"Colores disponibles"),n(),r(29,"div",9),b(30,Q,3,4,"label",10),n()(),r(31,"div",2)(32,"label"),l(33,"Im\xE1genes del producto (URLs)"),n(),b(34,Y,4,3,"div",11),r(35,"button",12),C("click",function(){return t.agregarImagen()}),l(36,"+ Agregar imagen"),n()(),r(37,"div",13)(38,"button",14),l(39,"Guardar"),n(),r(40,"button",15),C("click",function(){return t.cancelar()}),l(41,"Cancelar"),n()()()()),o&2&&(d(2),M(t.esEdicion?"Editar Producto":"Registrar Producto"),d(5),p("ngModel",t.producto.nombre),d(4),p("ngModel",t.producto.descripcion),d(4),p("ngModel",t.producto.dimensiones),d(4),p("ngModel",t.producto.idCategoria),d(),s("ngForOf",t.categorias),d(4),p("ngModel",t.producto.idEstadoProducto),d(),s("ngForOf",t.estadosProducto),d(5),s("ngForOf",t.colores),d(4),s("ngForOf",t.imagenes))},dependencies:[A,q,B,D,F,j,T,V,R,L,N,k,O],styles:[".crear-producto-container[_ngcontent-%COMP%]{max-width:700px;margin:auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px #0000001a;font-family:Segoe UI,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;font-weight:600;color:#333}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.4rem;display:flex;flex-direction:column}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.6rem;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border .3s}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.color-opciones[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.color-circulo[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border-radius:50%;border:1px solid #aaa}.imagen-url[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}button[_ngcontent-%COMP%]{cursor:pointer;border:none;border-radius:5px;font-weight:500;transition:background-color .2s ease}.btn-primario[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.6rem 1.4rem}.btn-primario[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-cancelar[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:.6rem 1.4rem;margin-left:1rem}.btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#5a6268}.btn-secundario[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;padding:.4rem 1rem}.btn-secundario[_ngcontent-%COMP%]:hover{background-color:#117a8b}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}"]})}}return a})();export{de as CrearProductoComponent};
