import{a as $,c as D,d as L,e as j}from"./chunk-NC6QU2SR.js";import{a as V}from"./chunk-AG3KCVKV.js";import{d as w,g as k}from"./chunk-GNZCGCMG.js";import{O as T,Q as z}from"./chunk-5ZSIRHXU.js";import{a as N}from"./chunk-PDLKG3CJ.js";import"./chunk-AK6URBU6.js";import{l as E,m as I,q as F}from"./chunk-BZWQZBMF.js";import{$b as O,Cb as b,Hb as f,Jb as p,Mb as M,Tb as r,Va as h,Vb as m,Ya as a,Za as u,_b as S,ac as y,ka as C,ob as l,qb as c,rb as P,ua as x,va as v,wb as i,xb as o,yb as g}from"./chunk-P5NMP2U3.js";var R=()=>["/admin/productos/crear"],q=e=>["/admin/productos/editar",e];function U(e,d){if(e&1&&(i(0,"option",9),r(1),o()),e&2){let t=d.$implicit;c("value",t.idCategoria),a(),m(" ",t.nombreCategoria," ")}}function A(e,d){if(e&1&&g(0,"img",17),e&2){let t=p().$implicit;c("src",t.imagenes[0].urlImagen,h)}}function G(e,d){e&1&&(i(0,"span",18),r(1," (Inactivo) "),o())}function H(e,d){if(e&1&&g(0,"div",21),e&2){let t=d.$implicit;P("background-color",t.codigoColor),M("title",t.codigoColor)}}function J(e,d){if(e&1&&(i(0,"div",19)(1,"strong"),r(2,"Colores:"),o(),l(3,H,1,3,"div",20),o()),e&2){let t=p().$implicit;a(3),c("ngForOf",t.colores)}}function K(e,d){if(e&1){let t=b();i(0,"mat-card",10),l(1,A,1,1,"img",11),i(2,"mat-card-content")(3,"h3"),r(4),l(5,G,2,0,"span",12),o(),i(6,"p")(7,"strong"),r(8,"Dimensiones:"),o(),r(9),o(),i(10,"p")(11,"strong"),r(12,"Descripci\xF3n:"),o(),r(13),o(),l(14,J,4,1,"div",13),o(),i(15,"div",14)(16,"button",15),r(17,"Editar"),o(),i(18,"button",16),f("click",function(){let s=x(t).$implicit,_=p();return v(_.eliminarProducto(s.idProducto))}),r(19,"Eliminar"),o()()()}if(e&2){let t=d.$implicit;a(),c("ngIf",t.imagenes==null?null:t.imagenes.length),a(3),m(" ",t.nombre," "),a(),c("ngIf",t.idEstadoProducto===2),a(4),m(" ",t.dimensiones,""),a(4),m(" ",t.descripcion,""),a(),c("ngIf",t.colores==null?null:t.colores.length),a(2),c("routerLink",y(7,q,t.idProducto))}}var at=(()=>{class e{constructor(t,n){this.productoService=t,this.categoriaService=n,this.productos=[],this.categorias=[],this.categoriaSeleccionada=null}ngOnInit(){this.obtenerCategorias(),this.obtenerProductos()}obtenerCategorias(){this.categoriaService.listar().subscribe({next:t=>this.categorias=t,error:()=>this.categorias=[]})}obtenerProductos(t){t?this.productoService.listarPorCategoria(t).subscribe({next:n=>this.productos=n,error:()=>this.productos=[]}):this.productoService.listarProductos().subscribe({next:n=>this.productos=n,error:()=>this.productos=[]})}onCategoriaChange(t){let n=Number(t.target.value);this.categoriaSeleccionada=n||null,this.obtenerProductos(this.categoriaSeleccionada)}eliminarProducto(t){confirm("\xBFEst\xE1s seguro de que deseas eliminar este producto?")&&this.productoService.eliminarProducto(t).subscribe({next:()=>{this.obtenerProductos(this.categoriaSeleccionada)},error:()=>{}})}static{this.\u0275fac=function(n){return new(n||e)(u(V),u(N))}}static{this.\u0275cmp=C({type:e,selectors:[["app-productos"]],standalone:!0,features:[S],decls:14,vars:4,consts:[[1,"producto-container"],[1,"filtro-categoria"],["for","categoria"],["id","categoria",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"producto-grid"],["class","producto-card mat-elevation-z4",4,"ngFor","ngForOf"],[3,"value"],[1,"producto-card","mat-elevation-z4"],["mat-card-image","","alt","Imagen del producto",3,"src",4,"ngIf"],["class","estado-inactivo",4,"ngIf"],["class","color-container",4,"ngIf"],[1,"producto-acciones"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click"],["mat-card-image","","alt","Imagen del producto",3,"src"],[1,"estado-inactivo"],[1,"color-container"],["class","color",3,"backgroundColor","title",4,"ngFor","ngForOf"],[1,"color",3,"title"]],template:function(n,s){n&1&&(i(0,"div",0)(1,"h2"),r(2,"Productos disponibles"),o(),i(3,"div",1)(4,"label",2),r(5,"Filtrar por categor\xEDa:"),o(),i(6,"select",3),f("change",function(B){return s.onCategoriaChange(B)}),i(7,"option",4),r(8,"Todas"),o(),l(9,U,2,2,"option",5),o(),i(10,"button",6),r(11," + Crear producto "),o()(),i(12,"div",7),l(13,K,20,9,"mat-card",8),o()()),n&2&&(a(9),c("ngForOf",s.categorias),a(),c("routerLink",O(3,R)),a(3),c("ngForOf",s.productos))},dependencies:[j,$,D,L,z,T,F,E,I,k,w],styles:[".producto-container[_ngcontent-%COMP%]{padding:2rem}.producto-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.8rem;font-weight:600}.filtro-categoria[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem}.filtro-categoria[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.filtro-categoria[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:1rem;border-radius:6px;border:1px solid #ccc}.producto-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:1.5rem}.producto-card[_ngcontent-%COMP%]{max-width:100%}.producto-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:180px;object-fit:cover;border-radius:4px 4px 0 0}.color-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;flex-wrap:wrap}.color-container[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:1px solid #ccc}.header-tools[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap}.header-tools[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;padding:0 1rem}.estado-inactivo[_ngcontent-%COMP%]{color:#c62828;font-size:.85rem;font-weight:700;margin-left:8px;background-color:#ffcdd2;padding:2px 6px;border-radius:4px}"]})}}return e})();export{at as ProductosComponent};
