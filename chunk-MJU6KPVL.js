import{e as rt,f as lt,g as mt,k as ct}from"./chunk-OE5KNDKJ.js";import{a as K,b as Q,c as W,d as X,e as Z,f as tt,g as et,h as it,i as at,j as nt,k as ot}from"./chunk-CIVZCN4S.js";import"./chunk-VW7NPXUO.js";import{a as V,b as A,f as G,g as H,h as $,i as B}from"./chunk-DHEV5CHZ.js";import{a as Y,b as J}from"./chunk-A34N6AUK.js";import"./chunk-Q64FFBLU.js";import{O as L,Q as S}from"./chunk-5ZSIRHXU.js";import{a as I,b as y,d as T,e as k,h as F,i as R,j as N,p as j,r as z}from"./chunk-YFY2E5R4.js";import{a as U}from"./chunk-PDLKG3CJ.js";import{j as q}from"./chunk-AK6URBU6.js";import{m as M,q as v}from"./chunk-BZWQZBMF.js";import{Ab as C,Cb as P,Hb as f,Jb as b,Tb as o,Ub as D,Va as O,Vb as h,Ya as m,Za as g,_b as x,ka as _,ob as c,qb as s,ua as w,va as E,wb as a,xb as n,yb as p,zb as u}from"./chunk-P5NMP2U3.js";function ft(t,l){t&1&&(a(0,"mat-error"),o(1," El nombre es obligatorio "),n())}var dt=(()=>{class t{constructor(i,r,e){this.fb=i,this.dialogRef=r,this.data=e,this.formCategoria=this.fb.group({idCategoria:[e?.idCategoria??null],nombreCategoria:[e?.nombreCategoria??"",y.required],descripcion:[e?.descripcion??""],imagen:[e?.imagen??""]})}guardar(){this.formCategoria.valid&&this.dialogRef.close(this.formCategoria.value)}cancelar(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||t)(g(j),g(rt),g(lt))}}static{this.\u0275cmp=_({type:t,selectors:[["app-categoria-form"]],standalone:!0,features:[x],decls:21,vars:3,consts:[["mat-dialog-title",""],[1,"formulario-modal",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","nombreCategoria"],[4,"ngIf"],["matInput","","formControlName","descripcion","rows","3"],["matInput","","formControlName","imagen"],[1,"acciones-modal"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","color","warn","type","button",3,"click"]],template:function(r,e){if(r&1&&(a(0,"h2",0),o(1),n(),a(2,"form",1),f("ngSubmit",function(){return e.guardar()}),a(3,"mat-form-field",2)(4,"mat-label"),o(5,"Nombre de la categor\xEDa"),n(),p(6,"input",3),c(7,ft,2,0,"mat-error",4),n(),a(8,"mat-form-field",2)(9,"mat-label"),o(10,"Descripci\xF3n"),n(),p(11,"textarea",5),n(),a(12,"mat-form-field",2)(13,"mat-label"),o(14,"URL de la imagen"),n(),p(15,"input",6),n(),a(16,"div",7)(17,"button",8),o(18,"Guardar"),n(),a(19,"button",9),f("click",function(){return e.cancelar()}),o(20,"Cancelar"),n()()()),r&2){let d;m(),D(e.formCategoria.value.idCategoria?"Editar Categor\xEDa":"Nueva Categor\xEDa"),m(),s("formGroup",e.formCategoria),m(5),s("ngIf",(d=e.formCategoria.get("nombreCategoria"))==null?null:d.hasError("required"))}},dependencies:[v,M,z,F,I,T,k,R,N,H,G,V,A,B,$,S,L],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.formulario-modal[_ngcontent-%COMP%]{padding:12px;display:flex;flex-direction:column;gap:20px;max-width:100%}.acciones-modal[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.mat-dialog-container[_ngcontent-%COMP%]{border-radius:10px;padding:24px!important;max-height:unset!important;overflow:visible!important}"]})}}return t})();function ut(t,l){t&1&&(a(0,"th",13),o(1," ID "),n())}function Ct(t,l){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=l.$implicit;m(),h(" ",i.idCategoria," ")}}function _t(t,l){t&1&&(a(0,"th",13),o(1," Nombre "),n())}function bt(t,l){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=l.$implicit;m(),h(" ",i.nombreCategoria," ")}}function ht(t,l){t&1&&(a(0,"th",13),o(1," Descripci\xF3n "),n())}function xt(t,l){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=l.$implicit;m(),h(" ",i.descripcion," ")}}function Mt(t,l){t&1&&(a(0,"th",13),o(1," Imagen "),n())}function vt(t,l){if(t&1&&p(0,"img",16),t&2){let i=b().$implicit;s("src",i.imagen,O)}}function St(t,l){if(t&1&&(a(0,"td",14),c(1,vt,1,1,"img",15),n()),t&2){let i=l.$implicit;m(),s("ngIf",i.imagen)}}function wt(t,l){t&1&&(a(0,"th",13),o(1," Acciones "),n())}function Et(t,l){if(t&1){let i=P();a(0,"td",14)(1,"button",17),f("click",function(){let e=w(i).$implicit,d=b();return E(d.abrirFormulario(e))}),a(2,"mat-icon"),o(3,"edit"),n()(),a(4,"button",18),f("click",function(){let e=w(i).$implicit,d=b();return E(d.eliminarCategoria(e.idCategoria))}),a(5,"mat-icon"),o(6,"delete"),n()()()}}function Ot(t,l){t&1&&p(0,"tr",19)}function Pt(t,l){t&1&&p(0,"tr",20)}var Kt=(()=>{class t{constructor(i,r,e){this.categoriaService=i,this.dialog=r,this.alertService=e,this.displayedColumns=["idCategoria","nombreCategoria","descripcion","imagen","acciones"],this.categorias=[]}ngOnInit(){this.listarCategorias()}listarCategorias(){this.categoriaService.listar().subscribe(i=>this.categorias=i)}abrirFormulario(i=null){this.dialog.open(dt,{width:"400px",data:i}).afterClosed().subscribe(e=>{e&&(e.idCategoria?this.categoriaService.actualizar(e).subscribe(()=>this.listarCategorias()):this.categoriaService.guardar(e).subscribe(()=>this.listarCategorias()))})}eliminarCategoria(i){this.alertService.confirm("\xBFEst\xE1s seguro de eliminar esta categor\xEDa?","Esta acci\xF3n no se puede deshacer.","S\xED, eliminar","Cancelar").then(r=>{r&&this.categoriaService.eliminar(i).subscribe({next:()=>{this.alertService.success("Categor\xEDa eliminada correctamente"),this.listarCategorias()},error:e=>{e.status===409?this.alertService.warning("No se puede eliminar la categor\xEDa porque est\xE1 asociada a uno o mas productos."):e.status===404?this.alertService.error("La categor\xEDa no existe."):this.alertService.error("Error al eliminar la categor\xEDa.")}})})}static{this.\u0275fac=function(r){return new(r||t)(g(U),g(mt),g(q))}}static{this.\u0275cmp=_({type:t,selectors:[["app-categoria"]],standalone:!0,features:[x],decls:24,vars:3,consts:[[1,"categorias-container"],[1,"categorias-header"],[1,"boton-profesional",3,"click"],["mat-table","",1,"mat-elevation-z8","categorias-tabla",3,"dataSource"],["matColumnDef","idCategoria"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombreCategoria"],["matColumnDef","descripcion"],["matColumnDef","imagen"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","Imagen","width","50","height","50",3,"src",4,"ngIf"],["alt","Imagen","width","50","height","50",3,"src"],["aria-label","Editar categor\xEDa",1,"accion-boton","boton-editar",3,"click"],["aria-label","Eliminar categor\xEDa",1,"accion-boton","boton-eliminar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,e){r&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Gesti\xF3n de Categor\xEDas"),n(),a(4,"button",2),f("click",function(){return e.abrirFormulario()}),o(5,"Nueva Categor\xEDa"),n()(),a(6,"table",3),u(7,4),c(8,ut,2,0,"th",5)(9,Ct,2,1,"td",6),C(),u(10,7),c(11,_t,2,0,"th",5)(12,bt,2,1,"td",6),C(),u(13,8),c(14,ht,2,0,"th",5)(15,xt,2,1,"td",6),C(),u(16,9),c(17,Mt,2,0,"th",5)(18,St,2,1,"td",6),C(),u(19,10),c(20,wt,2,0,"th",5)(21,Et,7,0,"td",6),C(),c(22,Ot,1,0,"tr",11)(23,Pt,1,0,"tr",12),n()()),r&2&&(m(6),s("dataSource",e.categorias),m(16),s("matHeaderRowDef",e.displayedColumns),m(),s("matRowDefColumns",e.displayedColumns))},dependencies:[v,M,ot,K,W,et,X,Q,it,Z,tt,at,nt,S,J,Y,ct],styles:[".categorias-container[_ngcontent-%COMP%]{overflow-x:auto;width:85%;margin:5px auto;background:#fff;padding:5px;border-radius:12px;box-shadow:0 6px 15px #0000001a}.categorias-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#1d3557;padding:18px;border-radius:10px;color:#fff;margin-bottom:10px}.categorias-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:600}.boton-profesional[_ngcontent-%COMP%]{background:#e63946;color:#fff;font-size:16px;font-weight:700;border:none;padding:12px 20px;border-radius:8px;cursor:pointer;transition:all .3s ease-in-out}.boton-profesional[_ngcontent-%COMP%]:hover{background:#d62839;box-shadow:0 4px 12px #e639464d;transform:translateY(-2px)}.categorias-tabla[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}.categorias-tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1d3557;color:#fff;font-weight:700;padding:12px;text-align:center;font-size:14px}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;font-size:14px;border-bottom:1px solid #ddd}.categorias-tabla[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#f1f1f1}.categorias-tabla[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#1d35571a}.accion-boton[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:8px;border:none;cursor:pointer;transition:all .3s ease-in-out;margin-right:10px}.boton-editar[_ngcontent-%COMP%]{background:#2a9d8f;color:#fff}.boton-editar[_ngcontent-%COMP%]:hover{background:#21867a;box-shadow:0 4px 10px #2a9d8f4d}.boton-eliminar[_ngcontent-%COMP%]{background:#e63946;color:#fff}.boton-eliminar[_ngcontent-%COMP%]:hover{background:#d62839;box-shadow:0 4px 10px #e639464d}.accion-boton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.formulario-categoria[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;margin:20px 0}.campo-categoria[_ngcontent-%COMP%]{flex:1}.boton-guardar[_ngcontent-%COMP%]{height:56px;font-weight:700;padding:0 24px}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){text-align:center}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){text-align:center}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){text-align:center}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){text-align:center}.categorias-tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){text-align:center}"]})}}return t})();export{Kt as CategoriaComponent};
