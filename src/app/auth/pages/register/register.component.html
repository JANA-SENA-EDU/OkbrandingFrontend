<div class="register-page">
  <button type="button" class="back-button" (click)="goBack()">
    ← Volver
  </button>
  <div class="register-form-container">
    <form [formGroup]="registerForm" (ngSubmit)="registrarse()" class="register-form">

      <div class="login-logo-container">
        <img src="assets/img/logo.png" alt="OK Branding Logo" class="logo" />
      </div>

      <h1 class="register-title">Crea tu cuenta</h1>
      <p class="register-subtitle">
        Regístrate para comenzar a gestionar tus proyectos y potenciar tu marca con okBranding.
      </p>

      <!-- Usuario -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Usuario</mat-label>
        <input matInput formControlName="username" />
        <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
          El usuario es obligatorio
        </mat-error>
      </mat-form-field>

      <!-- Contraseña -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Contraseña</mat-label>
        <input
          matInput
          type="password"
          formControlName="password"
        />
        <mat-error
          *ngIf="
            registerForm.get('password')?.hasError('required') &&
            registerForm.get('password')?.touched
          "
        >
          La contraseña es obligatoria
        </mat-error>
        <mat-error
          *ngIf="
            registerForm.get('password')?.hasError('minlength') &&
            registerForm.get('password')?.touched
          "
        >
          La contraseña debe tener al menos 6 caracteres
        </mat-error>
      </mat-form-field>

      <!-- Confirmar contraseña -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Confirmar contraseña</mat-label>
        <input
          matInput
          type="password"
          formControlName="confirmPassword"
        />
        <mat-error
          *ngIf="
            registerForm.get('confirmPassword')?.hasError('required') &&
            registerForm.get('confirmPassword')?.touched
          "
        >
          La confirmación es obligatoria
        </mat-error>
        <mat-error
          *ngIf="
            registerForm.hasError('passwordMismatch') &&
            registerForm.get('confirmPassword')?.touched
          "
        >
          Las contraseñas no coinciden
        </mat-error>
      </mat-form-field>

      <!-- Nombre completo -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombre completo</mat-label>
        <input matInput formControlName="nombre" />
        <mat-error *ngIf="registerForm.get('nombre')?.hasError('required')">
          El nombre es obligatorio
        </mat-error>
      </mat-form-field>

      <!-- Correo -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Correo electrónico</mat-label>
        <input matInput type="email" formControlName="correo" />
        <mat-error *ngIf="registerForm.get('correo')?.hasError('required')">
          El correo es obligatorio
        </mat-error>
        <mat-error *ngIf="registerForm.get('correo')?.hasError('email')">
          Ingresa un correo válido
        </mat-error>
      </mat-form-field>

      <!-- Teléfono -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Teléfono</mat-label>
        <input
          matInput
          type="tel"
          formControlName="telefono"
          maxlength="10"
          (input)="limitarLongitud()"
          (keypress)="permitirSoloNumeros($event)"
        />
        <mat-error *ngIf="registerForm.get('telefono')?.hasError('required')">
          El teléfono es obligatorio
        </mat-error>
        <mat-error *ngIf="registerForm.get('telefono')?.hasError('pattern')">
          El teléfono debe tener exactamente 10 números
        </mat-error>
      </mat-form-field>

      <button mat-raised-button color="primary" class="full-width" type="submit">
        Registrarse
      </button>

      <div class="registro-link">
        <a (click)="goToLoginWithAnimation()" href="javascript:void(0)">¿Ya tienes cuenta? Inicia sesión</a>
      </div>
    </form>
  </div>
</div>
