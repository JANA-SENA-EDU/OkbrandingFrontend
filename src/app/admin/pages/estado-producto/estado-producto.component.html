<section class="estado-wrapper">
  <div class="estado-header">
    <div class="estado-titulos">
      <p class="eyebrow">Catálogo</p>
      <h2>Estados de producto</h2>
      <p class="subtitulo">Crea, actualiza o elimina los estados que controlan el ciclo de vida de tus productos.</p>
    </div>
  </div>

  <form class="estado-formulario" (ngSubmit)="guardarEstado()">
    <div class="campo-estado">
      <label>Nombre del estado</label>
      <input
        type="text"
        placeholder="Ej: Disponible, Agotado, En tránsito..."
        [(ngModel)]="estadoForm.nombreEstado"
        name="nombreEstado"
        required
      />
    </div>
    <button mat-raised-button color="primary" type="submit">
      {{ estadoForm.idEstadoProducto ? 'Actualizar estado' : 'Guardar estado' }}
    </button>
  </form>

  <div *ngIf="estados.length; else sinEstados" class="estado-grid">
    <div class="estado-card" *ngFor="let estado of estados">
      <div class="estado-info">
        <span class="chip">{{ estado.nombreEstado }}</span>
        <small>Última edición disponible</small>
      </div>
      <div class="estado-acciones">
        <button mat-icon-button color="primary" (click)="editarEstado(estado)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="eliminarEstado(estado.idEstadoProducto)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <ng-template #sinEstados>
    <div class="estado-vacio">
      <mat-icon>inventory_2</mat-icon>
      <p>No se han registrado estados todavía.</p>
    </div>
  </ng-template>
</section>
